include includes.pug

doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    title HTMX Learning Test
    link(href="/styles/style.css", rel="stylesheet")
    script(
      src="https://unpkg.com/htmx.org@2.0.3" 
      integrity="sha384-0895/pl2MU10Hqc6jd4RvrthNlDiE9U1tWmX7WRESftEDRosgxNsQG/Ze9YMRzHq" 
      crossorigin="anonymous"
    )
  body.bg-slate-200
    div.h-screen.flex.justify-center.items-center.content-center
      div(class='w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700')
        div(class='p-6 space-y-4 md:space-y-6 sm:p-8')
          h1(class='text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white') Login
          form(
            class='space-y-4 md:space-y-6'
            hx-post="/auth/login" 
          )
            +login-form()
    script
      | document.body.addEventListener('htmx:beforeSwap', function(evt) {
      |  // Allow 422 and 400 responses to swap
      |  // We treat these as form validation errors
      |  if (
      |     // evt.detail.xhr.status === 422 || 
      |     evt.detail.xhr.status === 400
      |  ) {
      |    evt.detail.shouldSwap = true;
      |    evt.detail.isError = false;
      |  }
      | });
